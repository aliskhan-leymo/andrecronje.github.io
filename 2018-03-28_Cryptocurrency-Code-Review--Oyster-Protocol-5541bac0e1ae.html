<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Cryptocurrency Code Review: Oyster Protocol</title><meta name="description" content="Disclaimer: These reviews are done as is from what is on display in the master branch of the repo’s made available. This review is not a…"><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">Cryptocurrency Code Review: Oyster Protocol</h1>
</header>
<section data-field="subtitle" class="p-summary">
Disclaimer: These reviews are done as is from what is on display in the master branch of the repo’s made available. This review is not a…
</section>
<section data-field="body" class="e-content">
<section name="6a15" class="section section--body section--first section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="2cfa" id="2cfa" class="graf graf--h3 graf--leading graf--title">Cryptocurrency Code Review: Oyster Protocol</h3><p name="d0cf" id="d0cf" class="graf graf--p graf-after--h3"><strong class="markup--strong markup--p-strong">Disclaimer</strong>: These reviews are done as is from what is on display in the master branch of the repo’s made available. This review is not a comment on the overall project, scope, or success thereof. This was done as an educational review by me and any comments in the article are simply my opinion. It should not be used as any comment or advice on the project as a whole.</p><figure name="8d72" id="8d72" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 167px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 23.9%;"></div><img class="graf-image" data-image-id="1*sai-ZKDN-2AenbMxE35Kng.png" data-width="753" data-height="180" src="https://cdn-images-1.medium.com/max/800/1*sai-ZKDN-2AenbMxE35Kng.png"></div></figure><p name="73a1" id="73a1" class="graf graf--p graf-after--figure">IOTA and Ethereum integration for file storage to incentive a new revenue model for ads.</p><p name="ff9d" id="ff9d" class="graf graf--p graf-after--p">Fascinating concept, if you take it down to it’s core though then;</p><ul class="postList"><li name="af7d" id="af7d" class="graf graf--li graf-after--p">Users pay to store files</li><li name="7076" id="7076" class="graf graf--li graf-after--li">Files are stored on IOTA</li><li name="c2ce" id="c2ce" class="graf graf--li graf-after--li">IOTA tangle needs as many nodes as possible processing transactions to make it feasible</li><li name="dd4a" id="dd4a" class="graf graf--li graf-after--li">Get web hosts to become part of IOTA network to store data</li><li name="3812" id="3812" class="graf graf--li graf-after--li">Payment from users to store files go to web host</li></ul><p name="d241" id="d241" class="graf graf--p graf-after--li">Technically this doesn’t replace ad revenue, it is simply another revenue stream. This could be seen as malware, since the visiting user could potentially have no idea that they are being targeted, your CPU and GPU could be used right now by this website to fund me.</p><p name="ea61" id="ea61" class="graf graf--p graf-after--p">Still I like the idea, let’s go deeper</p><figure name="eccd" id="eccd" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 528px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 75.5%;"></div><img class="graf-image" data-image-id="1*yzLkBrp5QqvQ4Nubxv0-4A.png" data-width="925" data-height="698" data-is-featured="true" src="https://cdn-images-1.medium.com/max/800/1*yzLkBrp5QqvQ4Nubxv0-4A.png"></div></figure><p name="7ad5" id="7ad5" class="graf graf--p graf-after--figure">Two things I want to look at, brokernode (Server that connects to the Tangle to enable the Oyster Protocol) and webnode (Aspects of the Oyster Protocol that run on the website).</p><p name="cbb9" id="cbb9" class="graf graf--p graf-after--p">Let’s quickly talk web architecture for a moment, because it will be important to understand how this works. In web architecture you can high level split it up into 2 components, backend and frontend. Backend refers to something running on the server side of the website, a database, some processing, whatever. Frontend refers to what you see in your browser. Now frontend can be split up into 3 major components, HTML (the language of the content you see), CSS (the language of how the content is styled and looks), and JS (the language of how the content behaves and interacts). The thing to note here is that JS is a frontend system, this means it does not run on the server (where the website is hosted) but it runs in your browser.</p><p name="5e6d" id="5e6d" class="graf graf--p graf-after--p">It’s this mechanism that allows your CPU and GPU to be used, since the javascript via your browser has access to your resources. If I for example create a bit of javascript that creates an infinite loop that just keeps writing data to localStorage that website will become unresponsive and your browser will most likely ask you to close it.</p><p name="c222" id="c222" class="graf graf--p graf-after--p">This is what a lot of the “browser mining malware” is, it is a bit of javascript running on your device, mining for someone else.</p><p name="67c8" id="67c8" class="graf graf--p graf-after--p">So let’s look at webnode.</p><figure name="a39c" id="a39c" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 386px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 55.1%;"></div><img class="graf-image" data-image-id="1*B8fgJW62CxDCIK8FvkEtQQ.png" data-width="944" data-height="520" src="https://cdn-images-1.medium.com/max/800/1*B8fgJW62CxDCIK8FvkEtQQ.png"></div></figure><p name="3731" id="3731" class="graf graf--p graf-after--figure">Not a busy repository, but the requirements for this part of the architecture is pretty low, so this doesn’t need to be particularly active.</p><figure name="4b89" id="4b89" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 610px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 87.1%;"></div><img class="graf-image" data-image-id="1*M4tH6jFxYUR9x3LDBdYewQ.png" data-width="910" data-height="793" src="https://cdn-images-1.medium.com/max/800/1*M4tH6jFxYUR9x3LDBdYewQ.png"></div></figure><p name="4b6a" id="4b6a" class="graf graf--p graf-after--figure">Wasn’t expecting to see this, but I guess it makes sense, I thought we would see a bit more of a decentralized model, what we have above is a peerserver, so this is a self hosted solution that they have somewhere on their infrastructure that keeps a list of all of their peers and shares it.</p><p name="5264" id="5264" class="graf graf--p graf-after--p">So, this is a public API, and it is meant for anyone to consume, so security isn’t that important, but a few precautions should still be taken, for example you don’t want someone intercepting the returned peers and replacing it with another list (having the browser nodes mine for them instead), or you don’t want to expose your technology stack for other zerodays down the line. Express comes in with a lot of built in tools that already allow you to do this out of the box, so I am a bit sad that I don’t see a bit more around this.</p><figure name="8b54" id="8b54" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 356px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 50.9%;"></div><img class="graf-image" data-image-id="1*MRc7CXldDPZf8PQ0UsS0mA.png" data-width="930" data-height="473" src="https://cdn-images-1.medium.com/max/800/1*MRc7CXldDPZf8PQ0UsS0mA.png"></div></figure><p name="23b6" id="23b6" class="graf graf--p graf-after--figure">Let’s look at the client</p><figure name="25a8" id="25a8" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 485px; max-height: 364px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 75.1%;"></div><img class="graf-image" data-image-id="1*wmtebDtU7hXS-nYki-Iukg.png" data-width="485" data-height="364" src="https://cdn-images-1.medium.com/max/800/1*wmtebDtU7hXS-nYki-Iukg.png"></div></figure><p name="51bb" id="51bb" class="graf graf--p graf-after--figure">Nothing going on here, you input a peer and a message and then send it to the peer network which is hardcoded to localhost.</p><p name="ee33" id="ee33" class="graf graf--p graf-after--p">Instead I’m actually going to look at the legacy code, it seems there is more substance there, I guess they might still be migrating from the legacy to the react-app version.</p><figure name="2853" id="2853" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 439px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 62.7%;"></div><img class="graf-image" data-image-id="1*AifomqoZ8hHABO1awfAf6A.png" data-width="898" data-height="563" src="https://cdn-images-1.medium.com/max/800/1*AifomqoZ8hHABO1awfAf6A.png"></div></figure><p name="d7f5" id="d7f5" class="graf graf--p graf-after--figure">Some good substance here, connecting to the IOTA tangle, and doing the PoW work, still a lot of hardcoded values, but this is just a PoC after all.</p><p name="0954" id="0954" class="graf graf--p graf-after--p">Let’s move on to the brokernode</p><figure name="08ae" id="08ae" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 620px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 88.5%;"></div><img class="graf-image" data-image-id="1*Qjyz5Qjjs-zTUZsRdhK-sA.png" data-width="933" data-height="826" src="https://cdn-images-1.medium.com/max/800/1*Qjyz5Qjjs-zTUZsRdhK-sA.png"></div></figure><p name="4869" id="4869" class="graf graf--p graf-after--figure">Nice and active, let’s jump in</p><figure name="c537" id="c537" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 251px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 35.9%;"></div><img class="graf-image" data-image-id="1*0GtQWFrfTKfIikSBkaQvPQ.png" data-width="858" data-height="308" src="https://cdn-images-1.medium.com/max/800/1*0GtQWFrfTKfIikSBkaQvPQ.png"></div></figure><p name="2c0f" id="2c0f" class="graf graf--p graf-after--figure">so, everything is essentially mysql run. This isn’t an issue as such, but it is a scalability constraint, it means their throughput is only as fast as their disk and mysql can handle. There is room to change this in the future though to something a bit more distributed with faster throughput, but for PoC it’s fine.</p><figure name="0afd" id="0afd" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 107px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 15.299999999999999%;"></div><img class="graf-image" data-image-id="1*ACz5_-42EC8EPDaoY-__mw.png" data-width="791" data-height="121" src="https://cdn-images-1.medium.com/max/800/1*ACz5_-42EC8EPDaoY-__mw.png"></div></figure><p name="03bd" id="03bd" class="graf graf--p graf-after--figure">string.Contains evaluates to a boolean, so adding an == true is an additional execution that is not required, I unfortunately see this in quite a few places, so there is still quite a bit of optimization that needs to happen here.</p><figure name="efed" id="efed" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 507px; max-height: 314px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 61.9%;"></div><img class="graf-image" data-image-id="1*SxXEbY0RX4n_Ez3tZt8OIQ.png" data-width="507" data-height="314" src="https://cdn-images-1.medium.com/max/800/1*SxXEbY0RX4n_Ez3tZt8OIQ.png"></div></figure><figure name="2c5f" id="2c5f" class="graf graf--figure graf-after--figure"><div class="aspectRatioPlaceholder is-locked" style="max-width: 586px; max-height: 164px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 28.000000000000004%;"></div><img class="graf-image" data-image-id="1*xzprk6n7Y3JJU7WUm5WZ5A.png" data-width="586" data-height="164" src="https://cdn-images-1.medium.com/max/800/1*xzprk6n7Y3JJU7WUm5WZ5A.png"></div></figure><p name="aa96" id="aa96" class="graf graf--p graf-after--figure">Not a huge fan of the inconsistencies, should be UUID across the board and not int in some cases, but it could have been different developers.</p><p name="e27f" id="e27f" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">Conclusion</strong>: It’s very webapp 101, and while the technology is leveraging decentralization and blockchain, it is still a centralized hosted service. Not that that’s a bad thing, I think we are going to be seeing more and more centralized services that wrap decentralized solutions.</p><p name="7b30" id="7b30" class="graf graf--p graf-after--p">It’s a novel idea, although it doesn’t have a lot of flesh yet, the PoC is decent although probably only 60% complete, still a lot of whitepaper proofs missing.</p><p name="d9b4" id="d9b4" class="graf graf--p graf-after--p">The other thing to remember is that they are mining IOTA but paying Oyster, this could end up very profitable or very expensive for them, an easier solution would have just been to pay out the IOTA (and take a fee percentage instead) so the actual token doesn’t really have to exist.</p><p name="e2d8" id="e2d8" class="graf graf--p graf-after--p graf--trailing">If this gains momentum expect there to be OysterBlock addons coming out pretty soon.</p></div></div></section>
</section>
<footer><p class="p-tags">Tagged in <a href="https://medium.com/tag/blockchain" class="p-tag">Blockchain</a>, <a href="https://medium.com/tag/crypto" class="p-tag">Crypto</a>, <a href="https://medium.com/tag/cryptocurrency" class="p-tag">Cryptocurrency</a></p><p>By <a href="https://medium.com/@suchi.blackwing" class="p-author h-card">Andre Cronje</a> on <a href="https://medium.com/p/5541bac0e1ae"><time class="dt-published" datetime="2018-03-28T06:14:57.359Z">March 28, 2018</time></a>.</p><p><a href="https://medium.com/@suchi.blackwing/cryptocurrency-code-review-oyster-protocol-5541bac0e1ae" class="p-canonical">Canonical link</a></p><p>Exported from <a href="https://medium.com">Medium</a> on May 2, 2018.</p></footer></article>

</body></html>