<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Cryptocurrency Code Review: Elastos (ELA)</title><meta name="description" content="Disclaimer: These reviews are done as is from what is on display in the master branch of the repo’s made available. This review is not a…"><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">Cryptocurrency Code Review: Elastos (ELA)</h1>
</header>
<section data-field="subtitle" class="p-summary">
Disclaimer: These reviews are done as is from what is on display in the master branch of the repo’s made available. This review is not a…
</section>
<section data-field="body" class="e-content">
<section name="2098" class="section section--body section--first section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="9319" id="9319" class="graf graf--h3 graf--leading graf--title">Cryptocurrency Code Review: Elastos (ELA)</h3><p name="adbd" id="adbd" class="graf graf--p graf-after--h3"><strong class="markup--strong markup--p-strong">Disclaimer</strong>: These reviews are done as is from what is on display in the master branch of the repo’s made available. This review is not a comment on the overall project, scope, or success thereof. This was done as an educational review by me and any comments in the article are simply my opinion. It should not be used as any comment or advice on the project as a whole.</p><figure name="5bbc" id="5bbc" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 673px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 96.2%;"></div><img class="graf-image" data-image-id="1*R-FslAi42F52kOINEAqv_w.png" data-width="922" data-height="887" data-is-featured="true" src="https://cdn-images-1.medium.com/max/800/1*R-FslAi42F52kOINEAqv_w.png"></div></figure><p name="e950" id="e950" class="graf graf--p graf-after--figure">Elastos has a lot of repo’s and they are all active. Not a lot of activity, but there is activity. I’m not actually sure where to begin. So will go through all the different repo’s and see which one we are interested in the most;</p><figure name="a4d4" id="a4d4" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 285px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 40.699999999999996%;"></div><img class="graf-image" data-image-id="1*1E21bucIlNPNIwpuJ2UY7w.png" data-width="905" data-height="368" src="https://cdn-images-1.medium.com/max/800/1*1E21bucIlNPNIwpuJ2UY7w.png"></div></figure><p name="faab" id="faab" class="graf graf--p graf-after--figure">Just a link to their gitlab (interesting choice), but I have no idea what this is and the documentation is non existent, so let’s move on</p><figure name="c00a" id="c00a" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 202px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 28.9%;"></div><img class="graf-image" data-image-id="1*nXe4MM7SQpA7zSyoygbugg.png" data-width="908" data-height="262" src="https://cdn-images-1.medium.com/max/800/1*nXe4MM7SQpA7zSyoygbugg.png"></div></figure><p name="63f3" id="63f3" class="graf graf--p graf-after--figure">Moving on, I am not understanding their repo structure at all, the next one just points to another one.</p><figure name="6990" id="6990" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 614px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 87.8%;"></div><img class="graf-image" data-image-id="1*MsD7K-T2mTpoUVkwBROjzg.png" data-width="915" data-height="803" src="https://cdn-images-1.medium.com/max/800/1*MsD7K-T2mTpoUVkwBROjzg.png"></div></figure><p name="b4c7" id="b4c7" class="graf graf--p graf-after--figure">Ok, Elastos.ELA, from the readme this isn’t the right code, this is suppose to be the Elacoin implementation in the Elastos eco system, but this looks like the standard blockchain structure to me, so let’s start digging;</p><figure name="98fc" id="98fc" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 687px; max-height: 334px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 48.6%;"></div><img class="graf-image" data-image-id="1*DmrIm3Dmin02G7A3btuo1g.png" data-width="687" data-height="334" src="https://cdn-images-1.medium.com/max/800/1*DmrIm3Dmin02G7A3btuo1g.png"></div></figure><p name="b9ac" id="b9ac" class="graf graf--p graf-after--figure">Tabs set to 4 spaces, what cruel monster develops with tabs at 4 spaces! This is just personal preference though, so can ignore it :)</p><figure name="173d" id="173d" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 459px; max-height: 740px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 161.20000000000002%;"></div><img class="graf-image" data-image-id="1*XlXYwTV6av_y8lNrROjqmw.png" data-width="459" data-height="740" src="https://cdn-images-1.medium.com/max/800/1*XlXYwTV6av_y8lNrROjqmw.png"></div></figure><p name="00d8" id="00d8" class="graf graf--p graf-after--figure">RPC, Rest, and websocket server, normal PoW consensus, basic P2P startup, all the basics are checked here.</p><figure name="9b7d" id="9b7d" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 465px; max-height: 688px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 148%;"></div><img class="graf-image" data-image-id="1*XKSLtoTERYeRitw9qmxUCA.png" data-width="465" data-height="688" src="https://cdn-images-1.medium.com/max/800/1*XKSLtoTERYeRitw9qmxUCA.png"></div></figure><p name="bd4e" id="bd4e" class="graf graf--p graf-after--figure">Finally someone doing SSL nodes, even if selfsigned this is still better, I’m glad to finally see it, for the crypto world we live in there is way to much plain text broadcasting going on.</p><figure name="8f23" id="8f23" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 444px; max-height: 245px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 55.2%;"></div><img class="graf-image" data-image-id="1*iQBuPkIO-VR7PIXnP2V3vQ.png" data-width="444" data-height="245" src="https://cdn-images-1.medium.com/max/800/1*iQBuPkIO-VR7PIXnP2V3vQ.png"></div></figure><p name="d2b9" id="d2b9" class="graf graf--p graf-after--figure">Sending parameters as a map, I understand why people might want to do this since it means you don’t have to worry about function definitions, but this is bad practice because of something called type safety. Compilers interpret and optimize functions based on their type declarations, if it knows it is expecting a string and an int (kind of number in coding), it can optimize both and ensure type safety, if everything is passed as a map of strings then you lose that power and protection, this also means for each function you need internal knowledge of what the calling functions are sending. This is not good practice and from a compilation level will slow down code processing. I don’t like seeing this.</p><figure name="9fe6" id="9fe6" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 453px; max-height: 251px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 55.400000000000006%;"></div><img class="graf-image" data-image-id="1*vxRPKZcdn4yyflbPzAM6sg.png" data-width="453" data-height="251" src="https://cdn-images-1.medium.com/max/800/1*vxRPKZcdn4yyflbPzAM6sg.png"></div></figure><p name="7fb1" id="7fb1" class="graf graf--p graf-after--figure">Now you have to constantly do conversions such as the above, this is wasting processor cycles and will decrease overall speed</p><figure name="9fd3" id="9fd3" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 658px; max-height: 736px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 111.9%;"></div><img class="graf-image" data-image-id="1*BOZuXHyN6tC4v8nr2ZFRSg.png" data-width="658" data-height="736" src="https://cdn-images-1.medium.com/max/800/1*BOZuXHyN6tC4v8nr2ZFRSg.png"></div></figure><p name="2174" id="2174" class="graf graf--p graf-after--figure">These should not all be in one function, it makes the function difficult to read and understand, from a pure coding layout perspective these should have been extracted into sub functions. This is just personal preference again though.</p><figure name="1e79" id="1e79" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 529px; max-height: 107px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 20.200000000000003%;"></div><img class="graf-image" data-image-id="1*IIQ4302Icq4KeBjxV-DE-g.png" data-width="529" data-height="107" src="https://cdn-images-1.medium.com/max/800/1*IIQ4302Icq4KeBjxV-DE-g.png"></div></figure><p name="0364" id="0364" class="graf graf--p graf-after--figure">I get what they were trying to do at least, they are trying to have everything interact as if it was sending JSON objects from one function to the next, from a microservices perspective this is good design, but then have middleware that handles this for you so you can keep your coding clean.</p><figure name="9583" id="9583" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 310px; max-height: 184px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 59.4%;"></div><img class="graf-image" data-image-id="1*O30qfyZ_QaDTGNDMZuaiUA.png" data-width="310" data-height="184" src="https://cdn-images-1.medium.com/max/800/1*O30qfyZ_QaDTGNDMZuaiUA.png"></div></figure><p name="389a" id="389a" class="graf graf--p graf-after--figure">So let’s talk about ports quickly, a server has limited ports from 0 to 65535, from 1 to 1080 are generally reserved, you don’t really use them since they already are dedicated to specific services, 20 for example to FTP, so what happens if a blockchain implementation decides to run on 20? It won’t work, because most servers already have 20 dedicated to FTP, so mostly, you will see blockchains running on their own domain groupings, normally in the 3000–5000 range. This for example means you might not be able to run 2 blockchains at the same time, because they might have port conflicts. So what is running on 443? 443 is dedicated for HTTPS, this is predominantly used by services like Apache, Nginx, etc, these are web hosting solutions. So Elastos is running on 443, this means I can’t have it running on an existing webserver (which is where a lot of people would run their blockchains since they have the existing resources available), so this will cause port conflicts, and in this case, Apache, Nginx, other web services will win this fight. Why would they want to use 443? So that their API is secure, however, instead, they can still run on another port with a cert implementation. They took the easy way out here and this will cause problems in the future.</p><figure name="d627" id="d627" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 586px; max-height: 403px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 68.8%;"></div><img class="graf-image" data-image-id="1*2o90oS_U02aCrFsp0Y70Iw.png" data-width="586" data-height="403" src="https://cdn-images-1.medium.com/max/800/1*2o90oS_U02aCrFsp0Y70Iw.png"></div></figure><p name="044c" id="044c" class="graf graf--p graf-after--figure">Ok, so remember earlier when we spoke about type optimization? That’s another reason why you declare something called CONSTANTS, you normally give them a descriptive name like; const SENDBLOCK = 1, this means that when you do a case statement you refer to SENDBLOCK, but the actual value is 1, because numeric lookups are significantly faster than string lookups. Above again shows a lack of optimization experience, and this will hurt them in the long run.</p><figure name="0dee" id="0dee" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 660px; max-height: 490px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 74.2%;"></div><img class="graf-image" data-image-id="1*pmWNDNJbYqiqxInF0Z5L8g.png" data-width="660" data-height="490" src="https://cdn-images-1.medium.com/max/800/1*pmWNDNJbYqiqxInF0Z5L8g.png"></div></figure><p name="20d3" id="20d3" class="graf graf--p graf-after--figure">This is not the way to set up restful routes, again this is bad optimization and string comparisons will cause them to lose a lot of processing power.</p><figure name="4910" id="4910" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 566px; max-height: 207px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 36.6%;"></div><img class="graf-image" data-image-id="1*81CpkKPu4z8JKgkXpwyqNg.png" data-width="566" data-height="207" src="https://cdn-images-1.medium.com/max/800/1*81CpkKPu4z8JKgkXpwyqNg.png"></div></figure><p name="f4d0" id="f4d0" class="graf graf--p graf-after--figure">Optimization again, you know what the output will be, don’t waste CPU cycles figuring it out. Just a comment about the calculation.</p><figure name="5125" id="5125" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 502px; max-height: 309px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 61.6%;"></div><img class="graf-image" data-image-id="1*rKhaPVmkTFnejM84gw3PXQ.png" data-width="502" data-height="309" src="https://cdn-images-1.medium.com/max/800/1*rKhaPVmkTFnejM84gw3PXQ.png"></div></figure><p name="7a08" id="7a08" class="graf graf--p graf-after--figure">If you have defaults that work in 2 out of 3 cases, set them right at the start, don’t duplicate them, I don’t like seeing this kind of duplication.</p><figure name="312e" id="312e" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 554px; max-height: 181px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 32.7%;"></div><img class="graf-image" data-image-id="1*qWcJgzfiVGcaaTI5ztO5eA.png" data-width="554" data-height="181" src="https://cdn-images-1.medium.com/max/800/1*qWcJgzfiVGcaaTI5ztO5eA.png"></div></figure><p name="323b" id="323b" class="graf graf--p graf-after--figure">Why don’t I see functional coding being used nowadays? Most blockchain projects seem to avoid using maps and filters, functional coding is faster than iterative coding, that’s not even an opinion.</p><figure name="3781" id="3781" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 439px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 62.7%;"></div><img class="graf-image" data-image-id="1*pfm2DXvH9p_9bLTWFzx8jg.png" data-width="816" data-height="512" src="https://cdn-images-1.medium.com/max/800/1*pfm2DXvH9p_9bLTWFzx8jg.png"></div></figure><p name="d068" id="d068" class="graf graf--p graf-after--figure">No threading being used in PoW and again functional coding missing.</p><p name="e837" id="e837" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">Conclusion</strong>: It is code, I’m not a fan of it, it’s difficult to read and the layout isn’t to my personal liking. That however is personal preference and doesn’t inherently mean it’s bad. What I don’t like is the lack of optimization, strings are mostly used for cross function calls and that will cost them very heavy in the long run.</p><p name="8ea9" id="8ea9" class="graf graf--p graf-after--p graf--trailing">Other than that, this is just normal blockchain code, what makes them different? I don’t see how they are going to compete with the already established guys when they aren’t bringing anything new to the table, this is just standard blockchain 101 and I don’t recommend trying to dissect the code.</p></div></div></section>
</section>
<footer><p class="p-tags">Tagged in <a href="https://medium.com/tag/javascript" class="p-tag">JavaScript</a>, <a href="https://medium.com/tag/elastos" class="p-tag">Elastos</a>, <a href="https://medium.com/tag/crypto" class="p-tag">Crypto</a>, <a href="https://medium.com/tag/cryptocurrency" class="p-tag">Cryptocurrency</a>, <a href="https://medium.com/tag/blockchain" class="p-tag">Blockchain</a></p><p>By <a href="https://medium.com/@suchi.blackwing" class="p-author h-card">Andre Cronje</a> on <a href="https://medium.com/p/1b316b5a5607"><time class="dt-published" datetime="2018-03-18T09:51:35.087Z">March 18, 2018</time></a>.</p><p><a href="https://medium.com/@suchi.blackwing/cryptocurrency-code-review-elastos-ela-1b316b5a5607" class="p-canonical">Canonical link</a></p><p>Exported from <a href="https://medium.com">Medium</a> on May 2, 2018.</p></footer></article>

</body></html>