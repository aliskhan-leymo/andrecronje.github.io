<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Cryptocurrency Code Review: My Process</title><meta name="description" content="This is actually an extension of my Achain review, I wanted to share my process, but figured it needs an article on it’s own. So the below…"><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">Cryptocurrency Code Review: My Process</h1>
</header>
<section data-field="subtitle" class="p-summary">
This is actually an extension of my Achain review, I wanted to share my process, but figured it needs an article on it’s own. So the below…
</section>
<section data-field="body" class="e-content">
<section name="d95a" class="section section--body section--first section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="d7e3" id="d7e3" class="graf graf--h3 graf--leading graf--title">Cryptocurrency Code Review: My Process</h3><p name="cbda" id="cbda" class="graf graf--p graf-after--h3">This is actually an extension of my Achain review, I wanted to share my process, but figured it needs an article on it’s own. So the below is a walkthrough of how I approach a project, what and how I look for specific data points, and just to give a general idea of how such a process goes.</p><figure name="8838" id="8838" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 236px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 33.800000000000004%;"></div><img class="graf-image" data-image-id="1*6IM5yXB-7g14h5kla4YBwQ.png" data-width="1036" data-height="350" data-is-featured="true" src="https://cdn-images-1.medium.com/max/800/1*6IM5yXB-7g14h5kla4YBwQ.png"></div></figure><p name="e11e" id="e11e" class="graf graf--p graf-after--figure">I would like to see more people pick up this code review hobby, so let’s dive in.</p><p name="1045" id="1045" class="graf graf--p graf-after--p">The first step is always the repo, and then I start off by reading the readme a bit (if there is one). If we look at the screen below, the areas I’m interested in are the 5 variables above the red (pink?) line, these are commits, branches, releases, contributors, and license.</p><figure name="7802" id="7802" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 610px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 87.1%;"></div><img class="graf-image" data-image-id="1*llWfxUPQa37HKRvHlufalQ.png" data-width="1026" data-height="894" src="https://cdn-images-1.medium.com/max/800/1*llWfxUPQa37HKRvHlufalQ.png"></div></figure><p name="7e90" id="7e90" class="graf graf--p graf-after--figure">Commits is everytime a change was made, but a commit is a collection of changes, so some projects might have thousands of commits, but they only change 1 line at a time, another has 10 commit, but each commit ads a whole new feature set. There isn’t really a standard to follow here, that’s why I don’t put a lot of weight in the actual amount of commits.</p><p name="94c0" id="94c0" class="graf graf--p graf-after--p">Next is branches, a branch is exactly like it sounds, a branch off of the main repository (referred to as “master”), if you want to leave the integrity of master, but develop and test some experimental feature, you move it onto its own branch, that way you can develop in isolation without influencing parts that already work, so branch management is important, too many branches become cluttered, too few, means development is happening on master, which is a bad sign (you want to develop on local [your own system] or a custom branch, and you only want to merge into master when fully tested)</p><p name="8d2e" id="8d2e" class="graf graf--p graf-after--p">Release management is important if you have a build process, I don’t put to much weight into this.</p><p name="0e65" id="0e65" class="graf graf--p graf-after--p">Contributors, now this is actually an interesting one. Personally, my max teams are 3–5 people, I don’t like going over this, I find it’s the perfect spot for optimizing efficiency and development output, but this is only if I have 3–5 high caliber people. Enterprises projects often have the “let’s throw people at the problem” philosophy, this is something I hate, we get excited when a project has 30 developers, why? They won’t be outputting anything any faster, they could work on more projects concurrently, but that only helps if the scope of the project is big enough.</p><p name="8d52" id="8d52" class="graf graf--p graf-after--p">So I don’t put too much faith into contributors either. So essentially I just summarized that there isn’t really a hard metric here, and that’s true, you have to just take each step at a time.</p><figure name="2f14" id="2f14" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 610px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 87.1%;"></div><img class="graf-image" data-image-id="1*llWfxUPQa37HKRvHlufalQ.png" data-width="1026" data-height="894" src="https://cdn-images-1.medium.com/max/800/1*llWfxUPQa37HKRvHlufalQ.png"></div></figure><p name="1f0a" id="1f0a" class="graf graf--p graf-after--figure">186 commits, 6 branches, 2 releases, 8 contributors. Nothing amazing, nothing bad. Next, we have a look above at the directories we have (that’s all a code repository is, files and folders), so we see deploy_tool, include, lib, src/Chain and then some files. We don’t see the starting point in the root folder, which means it is somewhere else, include is normally reserved for external libraries that you “include” in your project. lib is normally also just inclusions or your own compiled libraries, and src (source) is normally the source code. So our entry point is most likely src/Chain</p><figure name="cbbe" id="cbbe" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 323px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 46.2%;"></div><img class="graf-image" data-image-id="1*yOgru3h6dZbeSCMzJCIE3w.png" data-width="946" data-height="437" src="https://cdn-images-1.medium.com/max/800/1*yOgru3h6dZbeSCMzJCIE3w.png"></div></figure><p name="cad8" id="cad8" class="graf graf--p graf-after--figure">Main.cpp, great stuff, that’s where we begin. (This unfortunately just comes with experience and working in a lot of different languages, you learn the default entry points for all the different languages and frameworks, but they are mostly intuitive, like main, or app, or index)</p><figure name="66ca" id="66ca" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 591px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 84.39999999999999%;"></div><img class="graf-image" data-image-id="1*pAj8aXRhOFVP7t3GqR2Q6g.png" data-width="998" data-height="842" src="https://cdn-images-1.medium.com/max/800/1*pAj8aXRhOFVP7t3GqR2Q6g.png"></div></figure><p name="bcf7" id="bcf7" class="graf graf--p graf-after--figure">int main(int argc, char** argv) is where everything begins (again, you need to know the language, but “main” is pretty intuitive, might as well have been called “start”), we see the client is the core, so we look at the include statements (top of file) and see client is in client/Client.hpp (this is the directory structure)</p><figure name="9e28" id="9e28" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 462px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 66%;"></div><img class="graf-image" data-image-id="1*emgVYZFNweSNZ-RBo2p-2A.png" data-width="946" data-height="624" src="https://cdn-images-1.medium.com/max/800/1*emgVYZFNweSNZ-RBo2p-2A.png"></div></figure><p name="bf3f" id="bf3f" class="graf graf--p graf-after--figure">So we try to find Client.hpp, now in all honestly I expected to go out one directory and find the directory client and in it Client.hpp, this is not the case, but there is libraries/client/Client.cpp (note the hpp vs cpp), this is part of the build process, if you want to get the details you go through the build process files, for the most part though, we want the cpp and not the hpp, so we are happy that we found it, so let’s continue.</p><div name="7234" id="7234" class="graf graf--mixtapeEmbed graf-after--p"><a href="https://github.com/Achain-Dev/Achain/blob/master/src/Chain/libraries/client/Client.cpp" data-href="https://github.com/Achain-Dev/Achain/blob/master/src/Chain/libraries/client/Client.cpp" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://github.com/Achain-Dev/Achain/blob/master/src/Chain/libraries/client/Client.cpp"><strong class="markup--strong markup--mixtapeEmbed-strong">Achain-Dev/Achain</strong><br><em class="markup--em markup--mixtapeEmbed-em">Achain blockchain</em>github.com</a><a href="https://github.com/Achain-Dev/Achain/blob/master/src/Chain/libraries/client/Client.cpp" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="937417c352afd060dbafa3b461449eff" data-thumbnail-img-id="0*Pwn8G-hXemKvim3a." style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/0*Pwn8G-hXemKvim3a.);"></a></div><p name="be10" id="be10" class="graf graf--p graf-after--mixtapeEmbed">We are looking at the above file, I start by scanning the headers to see what imports it is using, we see the files we will later want to look at blockchain/ &amp; db/ &amp; api/ so we make a mental note of them and continue on. At this point I start looking at the generics, comments and error handling, since this is the same for most languages and shows the level at which the code is at, this isn’t an indication of skill or a representation of the code, but it gives me an indication if the code is rushed, or if the code is in R&amp;D, etc. Each line is a signature at the end of the day, one line has slightly different indentation? Could have been another developer (tabs vs spaces) or perhaps a rushed added line. Whole blocks of code commented out? Code is still very much in R&amp;D (Research &amp; Development) flux, so even though these types of items don’t give you content and explain what the code is doing, they explain a lot about the developer.</p><figure name="fc22" id="fc22" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 341px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 48.699999999999996%;"></div><img class="graf-image" data-image-id="1*7OzuIb4hbMJVKok3Em550A.png" data-width="903" data-height="440" src="https://cdn-images-1.medium.com/max/800/1*7OzuIb4hbMJVKok3Em550A.png"></div></figure><p name="4251" id="4251" class="graf graf--p graf-after--figure">In this case, we see the code is absent of comments, but we also see good error handing. The code itself is a bit long for my liking, I believe files and functions should be small and bytesized, long files like this make it difficult to read and abstraction and encapsulation are important. So while this doesn’t tell me the code is bad, it does start giving me a slight bias.</p><p name="3b90" id="3b90" class="graf graf--p graf-after--p">So at this point I have my high level idea, now we look at the components of a blockchain, in all honesty, blockchains are a lot more simplistic than you think, we can split it up as follows</p><p name="ce81" id="ce81" class="graf graf--p graf-after--p">Communication module (this has two parts, part one is p2p part two is protocol, what I mean by this, is that we need a way for Node A to know about Node B (p2p) and then Node A &amp; B need to agree upon a shared language (protocol), if I send you an email and it is encrypted in a cipher only I understand, you cant do anything with it, but if we both agree then you can understand what I am sharing with you. These two principals make up the communication layer and we use it to tell each other about other nodes, blocks, and transactions.</p><p name="3b6f" id="3b6f" class="graf graf--p graf-after--p">Transactions, exactly what it sounds like, just a little packet (think a small message someone sends you) that contains a few details, normally a from address, a to address, and an amount. This is just an instruction saying A would like to send B 10 tokens.</p><p name="af39" id="af39" class="graf graf--p graf-after--p">Transaction pool, after a transaction was received, it needs somewhere to temporarily stay, so we put it in a transaction pool, which is just a collection of transactions.</p><p name="c32d" id="c32d" class="graf graf--p graf-after--p">Processing, at some point transactions need to be processed, whether this is a state system (ethereum) or a UTXO (unspent transaction outputs) system (bitcoin) doesn’t matter too much, those are just the implementation details of processing, at its core it takes transactions, checks them, and then applies them.</p><p name="565a" id="565a" class="graf graf--p graf-after--p">Block, after having been applied successfully, transactions are put in a block (this is just a sealed collection of processed transactions).</p><p name="9c9c" id="9c9c" class="graf graf--p graf-after--p">Consensus, at this point consensus occurs, again the exact implementation details don’t matter, but all the nodes reach agreement on a block. If they are all in agreement, this blocks forms part of the chain.</p><p name="a00a" id="a00a" class="graf graf--p graf-after--p">And there you have it, that is at its most basic level, a blockchain. It’s really not that technical.</p><p name="73e9" id="73e9" class="graf graf--p graf-after--p">So this is what I’m looking for, these components, so looking back at the libraries</p><figure name="2ece" id="2ece" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 389px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 55.60000000000001%;"></div><img class="graf-image" data-image-id="1*hk0ALgaCV5ufwNdUZHobJA.png" data-width="946" data-height="526" src="https://cdn-images-1.medium.com/max/800/1*hk0ALgaCV5ufwNdUZHobJA.png"></div></figure><p name="0d35" id="0d35" class="graf graf--p graf-after--figure">We see api (how does the outside world interact with a node), blockchain (the blocks and chain), cli (command line interface, how to interact with the node from the console), client (the core), db (database storage), glua (Achain implements LUA, this is their Virtual Machine language, Ethereum you would have EVM), net (network), rpc (remote procedure call, a way to call functions remotely, think API), utilities (collection of odds and ends), wallet.</p><p name="230d" id="230d" class="graf graf--p graf-after--p">So the ones I am immediately interested in are blockchain, client, db, net, and rpc. So we open up those.</p><p name="83bc" id="83bc" class="graf graf--p graf-after--p">In API, we mostly see logging, so this implementation isn’t done yet, not a lot for us to see here, so we move on. Blockchain is really busy, so I skip it for now, will come back to it later. CLI we see is just boilerplate (the usual implementation, nothing to learn here)</p><p name="e0cb" id="e0cb" class="graf graf--p graf-after--p">DB is for upgrading the current database, so not much to learn here. RPC is good but mostly boiler plate.</p><p name="7a27" id="7a27" class="graf graf--p graf-after--p">Which leaves us with blockchain/, client/, glua/, and net/. We have a lot of code to go through, so I start opening up files in multiple tabs.</p><p name="597e" id="597e" class="graf graf--p graf-after--p">Often you will look at a file, and the code is just neutral, nothing bad happening, but nothing good happening. This is just work that had to be done, not everything is fun and challenging the whole time. While I normally discount this, I actually shouldn’t, it still shows a lot of hard work that went into something, but it just doesn’t stand out. There is a lot of this code here, nothing amazing, just hours and hours of code.</p><p name="56cc" id="56cc" class="graf graf--p graf-after--p">We are seeing “Thinkyoung” a lot here, at this point I normally do a bit of research about what they are, they seem to be an incubator for people, I’m assuming they were involved in the project in some way. This is something I always feel bad about, with the sheer amount of projects out there, it’s very difficult to have all of the domain knowledge required to know the inner workings of each organization, and this often flavours the code. At this point I have no idea what Thinkyoung’s involvement are, did they do the code? At this point we can begin investigating, but I normally just focus on the code.</p><p name="a497" id="a497" class="graf graf--p graf-after--p">Few hours later and we are through the code. Sorry for not adding more here, there just wasn’t anything that really stood out, it’s just decent hard worked code. Normally I like to pull out some snippets I find interesting, nothing really jumped out to me. And then I go for my conclusion</p><p name="19c4" id="19c4" class="graf graf--p graf-after--p graf--trailing"><strong class="markup--strong markup--p-strong">Conclusion</strong>: That’s it, that’s all we do, we look at code, we try to understand what it does, and we see if it’s actually doing what it is suppose to. No rocket science, just a bit of hard work.</p></div></div></section>
</section>
<footer><p class="p-tags">Tagged in <a href="https://medium.com/tag/blockchain" class="p-tag">Blockchain</a>, <a href="https://medium.com/tag/crypto" class="p-tag">Crypto</a>, <a href="https://medium.com/tag/cryptocurrency" class="p-tag">Cryptocurrency</a></p><p>By <a href="https://medium.com/@suchi.blackwing" class="p-author h-card">Andre Cronje</a> on <a href="https://medium.com/p/8cc54ec1b3ef"><time class="dt-published" datetime="2018-04-13T06:26:47.939Z">April 13, 2018</time></a>.</p><p><a href="https://medium.com/@suchi.blackwing/cryptocurrency-code-review-my-process-8cc54ec1b3ef" class="p-canonical">Canonical link</a></p><p>Exported from <a href="https://medium.com">Medium</a> on May 2, 2018.</p></footer></article>

</body></html>