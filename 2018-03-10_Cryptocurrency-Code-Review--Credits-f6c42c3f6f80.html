<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Cryptocurrency Code Review: Credits</title><meta name="description" content="Disclaimer: These reviews are done as is from what is on display in the master branch of the repo’s made available. This review is not a…"><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">Cryptocurrency Code Review: Credits</h1>
</header>
<section data-field="subtitle" class="p-summary">
Disclaimer: These reviews are done as is from what is on display in the master branch of the repo’s made available. This review is not a…
</section>
<section data-field="body" class="e-content">
<section name="c109" class="section section--body section--first section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="8529" id="8529" class="graf graf--h3 graf--leading graf--title">Cryptocurrency Code Review: Credits</h3><p name="2500" id="2500" class="graf graf--p graf-after--h3"><strong class="markup--strong markup--p-strong">Disclaimer</strong>: These reviews are done as is from what is on display in the master branch of the repo’s made available. This review is not a comment on the overall project, scope, or success thereof. This was done as an educational review by me and any comments in the article are simply my opinion. It should not be used as any comment or advice on the project as a whole.</p><p name="d676" id="d676" class="graf graf--p graf-after--p">==EDIT 19/03/2018 A lot of people are excited about the test TPS achieved by Credits, linked in this article <a href="https://medium.com/@walteremmerich/hey-andre-209358a5125d?source=responses---------0----------------" data-href="https://medium.com/@walteremmerich/hey-andre-209358a5125d?source=responses---------0----------------" class="markup--anchor markup--p-anchor" target="_blank">https://medium.com/@credits/the-alpha-version-of-credits-showed-a-speed-of-488-403-transactions-per-second-during-the-testing-ca5c1045577</a></p><p name="121e" id="121e" class="graf graf--p graf-after--p">I think it’s a really good article. They neatly discuss their technical constraints and changes. And I look forward to reviewing their blockchain code (as opposed to the rest of the code reviewed in this article).</p><p name="302e" id="302e" class="graf graf--p graf-after--p">A few things to note from the article, are the constraints they mention;</p><ul class="postList"><li name="4069" id="4069" class="graf graf--li graf-after--p">The environment they were running in was high spec with very low network latency</li><li name="2b03" id="2b03" class="graf graf--li graf-after--li">They comment on transactions being reduced to 120 bytes for purposes of the test otherwise their disk throughput is 1,387 TB per hour</li><li name="dc28" id="dc28" class="graf graf--li graf-after--li">They mention removing EDS to reduce package size and increase the throughput (something that in production they have to bring back in)</li><li name="1a7e" id="1a7e" class="graf graf--li graf-after--li">Implementation of BFT with trusted nodes</li><li name="676f" id="676f" class="graf graf--li graf-after--li">They also have a very transparent paragraph explaining how in a production environment the TPS would be much lower if there are low throughput nodes or low network bandwidth</li></ul><p name="e0d5" id="e0d5" class="graf graf--p graf-after--li">So all in all, they make very transparent how they arrived at that throughput and how it relates to real blockchain TPS, and what compromises they had to make to accomplish it, which when considered means their production throughput will be looking quite a bit less.</p><p name="5fcb" id="5fcb" class="graf graf--p graf-after--p">Essentially their article and video state, they managed a controlled isolated centralized test at that speed and that in production they are expecting less, however given the same test conditions they are still going to try and up their throughput to 1 million.</p><p name="90d2" id="90d2" class="graf graf--p graf-after--p">For now this is just a very clever marketing video, since most people will be too frantic about the TPS, and not actually read the article. That’s why I am actually impressed that they published the article, it shows that they aren’t just marketing hype at least.</p><p name="9f4a" id="9f4a" class="graf graf--p graf-after--p">I eagerly await them releasing a playable version so that I can boot it up for myself ;)</p><p name="f3b3" id="f3b3" class="graf graf--p graf-after--p">==</p><p name="07bf" id="07bf" class="graf graf--p graf-after--p">Originally I had planned to skip doing Credits. I don’t really like reviewing a fresh ICO that doesn’t have their code released on github. You have to make too many assumptions. But Credits and their 1 million TPS keep coming up everywhere I look, so finally I decided that perhaps I do need to write down some of the things I have reviewed.</p><p name="f0ae" id="f0ae" class="graf graf--p graf-after--p">So first off, who is Credits?</p><figure name="9622" id="9622" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 334px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 47.699999999999996%;"></div><img class="graf-image" data-image-id="1*6IfWNEYwwAzSKaP-2ttecg.png" data-width="872" data-height="416" data-is-featured="true" src="https://cdn-images-1.medium.com/max/800/1*6IfWNEYwwAzSKaP-2ttecg.png"></div></figure><p name="d5a4" id="d5a4" class="graf graf--p graf-after--figure">So Credits is a blockchain that has managed to achieve 1 million TPS. Now at this point, while it isn’t 100% relevant I feel it is necessary to mention Moore’s law. Moore states that; “ the number of <a href="https://en.wikipedia.org/wiki/Transistor" data-href="https://en.wikipedia.org/wiki/Transistor" class="markup--anchor markup--p-anchor" title="Transistor" rel="noopener" target="_blank">transistors</a> in a dense <a href="https://en.wikipedia.org/wiki/Integrated_circuit" data-href="https://en.wikipedia.org/wiki/Integrated_circuit" class="markup--anchor markup--p-anchor" title="Integrated circuit" rel="noopener" target="_blank">integrated circuit</a> doubles approximately every two years.” What this meant back in the day is that hardware capacity would double every 2 years. Similar rules apply today in software. There is only a certain amount of improvement that can happen per every cycle. So currently, we have high claims of 200k TPS (this has yet to be truly testing in a byzantine environment), so jumping to 1 million, seems a bit strange right off the bat. So perhaps let’s look at why we have slow TPS?</p><p name="79bd" id="79bd" class="graf graf--p graf-after--p">So in Bitcoin, they introduced Proof of Work (PoW), now PoW is a brute force attack, there is a password that needs to be guessed and we spend cpu/gpu cycles guessing until someone gets it right. The Bitcoin network is designed that this “guess” should always take around 10 minutes. Now this would have meant 1 transaction every 10 minutes or 0.0016 TPS, so how did they circumvent this? They introduced blocks, a block is a grouping of transactions. So now I could pack 1 million transactions into a block (if there was enough space, there is also a megabyte limitation which I will skip for now), then they would have 1.6k TPS (that’s what segwit does for example, it just allows you to pack a few more transactions into the block). So what subsequent blockchains have done is introduce bigger blocks, lower difficulty guesses, and as we are seeing now PoS, dPOS, PoA, PoI, and BFT to increase TPS.</p><p name="c4d5" id="c4d5" class="graf graf--p graf-after--p">The above is only part one of TPS though, so let’s say you are on a single machine, you could process blocks as fast as that machine could pack blocks. This means you are as fast as the machines CPU. Now let’s say there are 500 machines, each validating blocks, are you as fast as all of them? No, you are only as fast as the slowest machine in the network. All machines (nodes) must reach consensus, so you often find yourself waiting for slower nodes to confirm (this is where longest chain adoption comes in, but again a topic for another day). So now we see we don’t just have the block constraint, but we also have a CPU constraint.</p><p name="024a" id="024a" class="graf graf--p graf-after--p">But that’s not all yet, we also have to transmit the data from point A to point B, this we do through the internet using a peer to peer protocol. So this means at the upper limit we have the speed of light (max speed of information travel), but again, we are as slow as the slowest connected machine to the network, which could be a dialup network.</p><p name="07fb" id="07fb" class="graf graf--p graf-after--p">So for TPS, we need a fast packing mechanism, fast CPU, and a fast network to achieve high throughput speeds. If you look at Ethereum and their PoA (I mean Proof of Authority that’s running in rinkeby, not PoA the crypto) then you can see it can fairly easily achieve 10k+ tps, because the hardware, and network of the packing nodes are controlled. TPS is easy when you can control the whole environment.</p><p name="b93a" id="b93a" class="graf graf--p graf-after--p">So how does Credits achieve this amazing TPS, if Moore’s law is against them, the packing mechanism is against them, CPU constraints are against them, and network constraints are against them? Let’s find out;</p><p name="48f9" id="48f9" class="graf graf--p graf-after--p">Ok, so we don’t have their github code, but they do have an alpha Node. So after quite a bit of digging we manage to find;</p><ol class="postList"><li name="5943" id="5943" class="graf graf--li graf-after--p">Alpha node</li><li name="69f8" id="69f8" class="graf graf--li graf-after--li">Desktop application node</li><li name="45bd" id="45bd" class="graf graf--li graf-after--li">Java Wallet</li><li name="e6d1" id="e6d1" class="graf graf--li graf-after--li">Alpha platform explorer</li><li name="53ca" id="53ca" class="graf graf--li graf-after--li">Online Wallet</li></ol><p name="6d23" id="6d23" class="graf graf--p graf-after--li">Next, digging through some of their articles I came across this statement;</p><p name="7664" id="7664" class="graf graf--p graf--startsWithDoubleQuote graf-after--p">“…as a result the Alpha version of the CREDITS platform is already capable of 100,000 transactions per second. Every second, special robots load a huge number of requests into the system to test its performance.”</p><figure name="e4e9" id="e4e9" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 684px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 97.7%;"></div><img class="graf-image" data-image-id="1*j5XTmYKSsEsPCknu4bvlBQ.png" data-width="911" data-height="890" src="https://cdn-images-1.medium.com/max/800/1*j5XTmYKSsEsPCknu4bvlBQ.png"></div></figure><p name="522c" id="522c" class="graf graf--p graf-after--figure">Every second they say? Huge number of requests they say? Guess the “special robot” is broken.</p><p name="63a4" id="63a4" class="graf graf--p graf-after--p">Let’s start with the node</p><figure name="dae3" id="dae3" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 610px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 87.1%;"></div><img class="graf-image" data-image-id="1*5ZxFNC1MEuIscJl8HAxLBQ.png" data-width="700" data-height="610" src="https://cdn-images-1.medium.com/max/800/1*5ZxFNC1MEuIscJl8HAxLBQ.png"></div></figure><p name="cfd0" id="cfd0" class="graf graf--p graf-after--figure">This is all I ever managed to accomplish. This doesn’t actually do anything by the way, it just keeps trying to connect. Changed firewall rules, gave all exceptions. Tried on different systems. Which can we also mention that this is a Windows only node? So the fastest systems in the world are all *NIX based, but here we are going to get 1 million TPS with a Windows executable? They say it’s developed in C++.</p><figure name="4b11" id="4b11" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 462px; max-height: 241px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 52.2%;"></div><img class="graf-image" data-image-id="1*LcaPp0cpz5SxNnTFw-YTlQ.png" data-width="462" data-height="241" src="https://cdn-images-1.medium.com/max/800/1*LcaPp0cpz5SxNnTFw-YTlQ.png"></div></figure><p name="0912" id="0912" class="graf graf--p graf-after--figure">The above is the whole system for the node.</p><p name="be13" id="be13" class="graf graf--p graf-after--p">But ok, so the Node doesn’t work, we can’t decompile it, and there is no code to look at. Moving on.</p><p name="0617" id="0617" class="graf graf--p graf-after--p">Desktop Wallet time;</p><figure name="a5bb" id="a5bb" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 486px; max-height: 125px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 25.7%;"></div><img class="graf-image" data-image-id="1*9cdvAZn1mquZHOGwcfyTTQ.png" data-width="486" data-height="125" src="https://cdn-images-1.medium.com/max/800/1*9cdvAZn1mquZHOGwcfyTTQ.png"></div></figure><p name="98ef" id="98ef" class="graf graf--p graf-after--figure">Interesting it’s Java, why would the Node be C++ but the client Java? Anyway, it’s great news for us, we can decompile it!</p><figure name="2dcf" id="2dcf" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 511px; max-height: 411px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 80.4%;"></div><img class="graf-image" data-image-id="1*rH_FyaQe9awhyt7m7Hap1A.png" data-width="511" data-height="411" src="https://cdn-images-1.medium.com/max/800/1*rH_FyaQe9awhyt7m7Hap1A.png"></div></figure><p name="9c6d" id="9c6d" class="graf graf--p graf-after--figure">No encapsulation, no structures, no inheritance. Just going to store the account and amount right there in a String. This is very basic coding. No where here does it actually create a wallet, or set a key,</p><figure name="ed4b" id="ed4b" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 273px; max-height: 641px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 234.79999999999998%;"></div><img class="graf-image" data-image-id="1*0pfPX3gMVLxZwJ93C1K99Q.png" data-width="273" data-height="641" src="https://cdn-images-1.medium.com/max/800/1*0pfPX3gMVLxZwJ93C1K99Q.png"></div></figure><p name="439a" id="439a" class="graf graf--p graf-after--figure">That’s the whole code structure, I can’t find any cryptographic functions, I can’t find any actual key storage or creation. I see some xml forms that don’t actually do anything, and “key creation” is just hardcoded values</p><figure name="01cd" id="01cd" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 637px; max-height: 462px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 72.5%;"></div><img class="graf-image" data-image-id="1*XjwyJeOmWjcHb39uLmvv7w.png" data-width="637" data-height="462" src="https://cdn-images-1.medium.com/max/800/1*XjwyJeOmWjcHb39uLmvv7w.png"></div></figure><figure name="1f25" id="1f25" class="graf graf--figure graf-after--figure"><div class="aspectRatioPlaceholder is-locked" style="max-width: 656px; max-height: 437px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 66.60000000000001%;"></div><img class="graf-image" data-image-id="1*hF0z8QygnWp2TMBzGxKXIQ.png" data-width="656" data-height="437" src="https://cdn-images-1.medium.com/max/800/1*hF0z8QygnWp2TMBzGxKXIQ.png"></div></figure><p name="6ebd" id="6ebd" class="graf graf--p graf-after--figure">This is the key generation;</p><figure name="a47f" id="a47f" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 634px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 90.60000000000001%;"></div><img class="graf-image" data-image-id="1*ut8Co2Y6zcryKO4l6mggRA.png" data-width="790" data-height="716" src="https://cdn-images-1.medium.com/max/800/1*ut8Co2Y6zcryKO4l6mggRA.png"></div></figure><p name="14c7" id="14c7" class="graf graf--p graf-after--figure">So all this does, is take a string, put CSx in front of it, then select 29 random characters to follow it. This is NOT how you do key generation. Whomever wrote this code knew nothing about cryptographic functions.</p><p name="4a80" id="4a80" class="graf graf--p graf-after--p">And see that line that reads the public.key from the property file? Here it is, in plain text;</p><figure name="3a11" id="3a11" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 454px; max-height: 104px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 22.900000000000002%;"></div><img class="graf-image" data-image-id="1*uCG6m-uusQlxO3PYmCOXiw.png" data-width="454" data-height="104" src="https://cdn-images-1.medium.com/max/800/1*uCG6m-uusQlxO3PYmCOXiw.png"></div></figure><p name="fe92" id="fe92" class="graf graf--p graf-after--figure">Reading this is similar to looking at a first year CompSci students projects. I’m done with the Java client for now. I can’t stress how bad and non functional this is.</p><p name="bc65" id="bc65" class="graf graf--p graf-after--p">Let’s move on to the online wallet</p><figure name="df14" id="df14" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 453px; max-height: 402px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 88.7%;"></div><img class="graf-image" data-image-id="1*-MwjY7nMvDTbSRRGMSciEA.png" data-width="453" data-height="402" src="https://cdn-images-1.medium.com/max/800/1*-MwjY7nMvDTbSRRGMSciEA.png"></div></figure><p name="d205" id="d205" class="graf graf--p graf-after--figure">Built in Angular. On windows. You can see the project was saved in C:/wallet/wallet/frontend. Again I’m just seeing so many beginner mistakes, at least it’s better than being saved in C:/users/…</p><figure name="9916" id="9916" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 196px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 28.000000000000004%;"></div><img class="graf-image" data-image-id="1*NdNL-s8tBbZDtZyPvOrNVw.png" data-width="850" data-height="238" src="https://cdn-images-1.medium.com/max/800/1*NdNL-s8tBbZDtZyPvOrNVw.png"></div></figure><p name="d7b4" id="d7b4" class="graf graf--p graf-after--figure">Ok, this is now just getting really silly. So that’s the private key generation. MD5 of the current data + MD5 of the key you typed in (which has no limitations or security by the way) + MD5 of a random number.</p><p name="7e9f" id="7e9f" class="graf graf--p graf-after--p">That’s it, no SHA, no curve, no keccak. Just a quick and dirty MD5. I really don’t want to continue looking at this code.</p><p name="95f1" id="95f1" class="graf graf--p graf-after--p">But let’s trudge on.</p><figure name="6f4b" id="6f4b" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 202px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 28.9%;"></div><img class="graf-image" data-image-id="1*K1ZimWH2Act_QGNg6AptdQ.png" data-width="700" data-height="202" src="https://cdn-images-1.medium.com/max/800/1*K1ZimWH2Act_QGNg6AptdQ.png"></div></figure><p name="9721" id="9721" class="graf graf--p graf-after--figure">Oh, did I forget to mention this is all happening over a non secure line? All over HTTP, so all of this can be intercepted while we are at it as well, great for man in the middle attacks…</p><figure name="6bb7" id="6bb7" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 419px; max-height: 93px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 22.2%;"></div><img class="graf-image" data-image-id="1*Zou5EhCeSPSGupxcKppluQ.png" data-width="419" data-height="93" src="https://cdn-images-1.medium.com/max/800/1*Zou5EhCeSPSGupxcKppluQ.png"></div></figure><p name="6f56" id="6f56" class="graf graf--p graf-after--figure">The public key is an MD5 of the private key. This is extremely insecure and reversible.</p><figure name="71a8" id="71a8" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 660px; max-height: 263px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 39.800000000000004%;"></div><img class="graf-image" data-image-id="1*Lqn--c9ivH3odT0XQ5oLQg.png" data-width="660" data-height="263" src="https://cdn-images-1.medium.com/max/800/1*Lqn--c9ivH3odT0XQ5oLQg.png"></div></figure><p name="e308" id="e308" class="graf graf--p graf-after--figure">More hardcoded hashes. Ok I’m done. I’m sorry I can’t.</p><p name="13fd" id="13fd" class="graf graf--p graf-after--p graf--trailing"><strong class="markup--strong markup--p-strong">Conclusion</strong>: This is amateurish code, written by extreme beginners, who are only just now learning how to code. They need to do a complete ground up overhaul of all of their code if they want to accomplish their goals. I don’t know how this will live up to their expectations. Perhaps they just rushed it to try and get something out the door, but even then, this is amateurish and incredibly basic level code.</p></div></div></section>
</section>
<footer><p class="p-tags">Tagged in <a href="https://medium.com/tag/blockchain" class="p-tag">Blockchain</a>, <a href="https://medium.com/tag/credit" class="p-tag">Credits</a>, <a href="https://medium.com/tag/cryptocurrency" class="p-tag">Cryptocurrency</a>, <a href="https://medium.com/tag/crypto" class="p-tag">Crypto</a>, <a href="https://medium.com/tag/code-review" class="p-tag">Code Review</a></p><p>By <a href="https://medium.com/@suchi.blackwing" class="p-author h-card">Andre Cronje</a> on <a href="https://medium.com/p/f6c42c3f6f80"><time class="dt-published" datetime="2018-03-10T10:23:15.113Z">March 10, 2018</time></a>.</p><p><a href="https://medium.com/@suchi.blackwing/cryptocurrency-code-review-credits-f6c42c3f6f80" class="p-canonical">Canonical link</a></p><p>Exported from <a href="https://medium.com">Medium</a> on May 2, 2018.</p></footer></article>

</body></html>