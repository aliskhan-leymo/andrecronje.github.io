<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Cryptocurrency Code Review: Chainlink</title><meta name="description" content="Disclaimer: These reviews are done as is from what is on display in the master branch of the repo’s made available. This review is not a…"><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">Cryptocurrency Code Review: Chainlink</h1>
</header>
<section data-field="subtitle" class="p-summary">
Disclaimer: These reviews are done as is from what is on display in the master branch of the repo’s made available. This review is not a…
</section>
<section data-field="body" class="e-content">
<section name="0be5" class="section section--body section--first section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="157a" id="157a" class="graf graf--h3 graf--leading graf--title">Cryptocurrency Code Review: Chainlink</h3><p name="adff" id="adff" class="graf graf--p graf-after--h3"><strong class="markup--strong markup--p-strong">Disclaimer</strong>: These reviews are done as is from what is on display in the master branch of the repo’s made available. This review is not a comment on the overall project, scope, or success thereof. This was done as an educational review by me and any comments in the article are simply my opinion. It should not be used as any comment or advice on the project as a whole.</p><p name="25cf" id="25cf" class="graf graf--p graf-after--p">@Theroryshow (Rory) from ChainLink reached out and asked that I do a third party review for ChainLink. I never like it when a member of the team actually reaches out, since it almost always guarantees the code is good. But I’ve been meaning to do ChainLink for awhile now, so let’s have a look;</p><figure name="6595" id="6595" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 653px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 93.30000000000001%;"></div><img class="graf-image" data-image-id="1*Dajeh2YMt1bVTrEapn60xA.png" data-width="921" data-height="859" data-is-featured="true" src="https://cdn-images-1.medium.com/max/800/1*Dajeh2YMt1bVTrEapn60xA.png"></div></figure><p name="e83f" id="e83f" class="graf graf--p graf-after--figure">Active repo, good amount of contributors, good branches structure (features/chores)</p><figure name="70f7" id="70f7" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 712px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 101.69999999999999%;"></div><img class="graf-image" data-image-id="1*_vA9MP8guDGbShIZzWN0mQ.png" data-width="908" data-height="923" src="https://cdn-images-1.medium.com/max/800/1*_vA9MP8guDGbShIZzWN0mQ.png"></div></figure><p name="9763" id="9763" class="graf graf--p graf-after--figure">Good spread out of contributors in commits, good commit messages.</p><p name="d60f" id="d60f" class="graf graf--p graf-after--p">So at this point, let’s quickly talk about ChainLink. Why is off-chain data important? Let’s say you want to do a smart contract that does token swops between 2 ERC20 tokens. At the base level, you can do this 1:1 or you can define a hardcoded ratio 1:100, but as we know, price is volatile, so if you want to implement such a mechanism you would need to be able to get real-time price data. This however isn’t possible in a smart contract, since you can’t make an outside request. So how would you solve it? The easiest way is that you set up an Ethereum Log Event, you register to receive these events on your own external server, when you receive the event you do your HTTP (web) request and get the current trading price, once you have this data you push it back into the smart contract via a transaction call. Now the smart contract has the data, so it can execute the transfer.</p><p name="cbfe" id="cbfe" class="graf graf--p graf-after--p">From the above, you can see that isn’t really for everyone, you need your own servers and event subscribers. So what was the option before ChainLink? The option was oraclize <a href="http://www.oraclize.it/" data-href="http://www.oraclize.it/" class="markup--anchor markup--p-anchor" rel="nofollow noopener" target="_blank">http://www.oraclize.it/</a> which is a centralized company that did this work for you, you prepay their smart contract with ETH and then you could make requests get the result and push it back into your smart contract. But for this, you have to trust them, what happens if they no longer exist? Your whole solution is dead.</p><p name="0da8" id="0da8" class="graf graf--p graf-after--p">So a decentralized solution is required for this, step in ChainLink. At it’s core it does the same but in a decentralized fashion. But this comes with a few issues, 1 what if it’s in the interest of the node giving me the trading price (in the example above) at a much lower (or higher) value to benefit themselves. So this data has to be validated, this is where shared consensus comes in.</p><p name="5966" id="5966" class="graf graf--p graf-after--p">Although this comes with a lot of complications, in Ethereum events are deterministic, which means if you replay 1 + 1 you will always get 2. In HTTP systems it is often not deterministic, if I make the request for trading price 2 seconds apart, that price can be very different, so which one of the two nodes is correct then? The other problem is, essentially all nodes have to do the HTTP request, but only 1 gets rewarded, this is very different than with standard deterministic blockchain events since a) no matter what the time difference I will always get the same result and b) while a block is expensive to make, it’s super fast to validate (unlike in the Oracle where each Node has to pay for the data/bandwidth cost). Let’s use the highly unlikely example that I want to download a 1 TB file, now to validate that a node isn’t cheating, each node has to download that 1 TB file, but only 1 is going to get the reward.</p><p name="0c61" id="0c61" class="graf graf--p graf-after--p">ChainLink has a solution for problem 1 whereby they aggregate, I’m not a huge fan of it, the problem is, if I want exact millisecond sensitive data, I don’t want a median average returned to me, so for time sensitive data I don’t think this is an ideal solution, for less volatile data, this however is a good solution to get off-chain data, perhaps user details or weather details.</p><p name="535a" id="535a" class="graf graf--p graf-after--p">For issue 2, I haven’t really seen a solution.</p><figure name="7952" id="7952" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 257px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 36.7%;"></div><img class="graf-image" data-image-id="1*SQqFeRn0nX_wb6eFdUsB0Q.png" data-width="795" data-height="292" src="https://cdn-images-1.medium.com/max/800/1*SQqFeRn0nX_wb6eFdUsB0Q.png"></div></figure><p name="1fc0" id="1fc0" class="graf graf--p graf-after--figure">Going over their wiki, I saw something I really liked though (which wasn’t covered in the whitepaper), there are 5 ways to trigger a ChainLink job, RunLog, Web, Cron, EthLog and RunAt.</p><p name="97fe" id="97fe" class="graf graf--p graf-after--p">Cron is the important one, Cron is a unix based time mechanism which allows you to set something to run at a specific time or interval. This is something very lacking currently in Ethereum smart contracts (they were omitted for a very good reason, since they destroy the deterministic nature of the blockchain, so they can’t be core part of it), but it is important for real world cases.</p><p name="1b7c" id="1b7c" class="graf graf--p graf-after--p">So an example people often like to use with blockchain and smart contracts is the flight insurance contract. You buy flight insurance, the blockchain sees the flight was delayed, you are paid out 24 hours later. This isn’t actually currently possible on the blockchain since a) it can’t natively receive data that the flight was delayed and b) it can’t trigger an event to happen at a specified time. All smart contract events must be triggered by an initiating transactions.</p><p name="c618" id="c618" class="graf graf--p graf-after--p">So a time trigger, and event trigger solution is a must have to actually build real world examples, for this reason, I think solutions like ChainLink are critical.</p><p name="3b9d" id="3b9d" class="graf graf--p graf-after--p">However, if we look at something like Oraclize, they pay for their server usage via ETH fee’s. There is no reason you can’t have a 100% ETH based decentralized solution, you can pay the decentralized nodes via ETH fee’s for their data transfer (a simple Ethereum based side-chain). So in it’s current iteration ChainLink as a token for me, doesn’t have a great value proposition.</p><p name="8d54" id="8d54" class="graf graf--p graf-after--p">As they expand to more blockchains and become more agnostic this vision however changes, but right now, with just Ethereum support, I actually find it very annoying that you have to own ETH (to trigger the log event) and ChainLink (to pay for the data request) to receive a simple HTTP request.</p><p name="1155" id="1155" class="graf graf--p graf-after--p">This model also greatly limits the kind of data you might want, so let’s look back at the flight insurance example, how do you know the flight was delayed? Well, you have to ask the flight system (third party) every few seconds/minutes/hours if the flight was delayed. But think how expensive this will become? Essentially I don’t want to do any more than 1 request. So I will do 1 request after the flight was suppose to be successful. Not a very user friendly system is that?</p><p name="c18c" id="c18c" class="graf graf--p graf-after--p">So let’s dive into the code, so HTTP is actually very finicky and everyone has a different implementation, one developer will use basic auth, another JWT, another sessions, another a combination of the above, but what this means to support HTTP you need to support payloads and headers</p><figure name="a23d" id="a23d" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 648px; max-height: 204px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 31.5%;"></div><img class="graf-image" data-image-id="1*5KJ_kxhlZxVI5zPaUWjx3w.png" data-width="648" data-height="204" src="https://cdn-images-1.medium.com/max/800/1*5KJ_kxhlZxVI5zPaUWjx3w.png"></div></figure><p name="2979" id="2979" class="graf graf--p graf-after--figure">So right off the bad, what I don’t like, is there aren’t any headers being specified there, only the URL and then the basic auth parameters. This means they are currently coding for a limited set of cases, but, I’m sure they will still expand on it, so let’s move on.</p><figure name="f5f6" id="f5f6" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 613px; max-height: 271px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 44.2%;"></div><img class="graf-image" data-image-id="1*2bvB2gZ9To2nna_1SH2Rcg.png" data-width="613" data-height="271" src="https://cdn-images-1.medium.com/max/800/1*2bvB2gZ9To2nna_1SH2Rcg.png"></div></figure><p name="9543" id="9543" class="graf graf--p graf-after--figure">Their code is incredibly Ethereum intertwined, so it wasn’t designed with multiple blockchains in mind, right now they are building Ethereum oracles, this concerns me a little bit from an architecture perspective, since it means they are rushing for their primary use case, ideally they should have tried abstracting as much as possible from the blockchain and instead following an ESB (Enterprise Service Bus) design approach, this will hurt their development in the future.</p><figure name="7682" id="7682" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 367px; max-height: 67px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 18.3%;"></div><img class="graf-image" data-image-id="1*Y8p6xBIJLBHPYVe17TDD1A.png" data-width="367" data-height="67" src="https://cdn-images-1.medium.com/max/800/1*Y8p6xBIJLBHPYVe17TDD1A.png"></div></figure><p name="21ee" id="21ee" class="graf graf--p graf-after--figure">Their cron implementation isn’t time agnostic, what this means is it doesn’t take nodes in multiple timezones into considerations, some nodes will fire at different times or hours because of localized timezone adjustment, this tells me they don’t have too much production experience in this field.</p><p name="9379" id="9379" class="graf graf--p graf-after--p">They have implemented all of their job specs, and they have implemented all of their initiators. There are some good fallbacks in terms of job spec validators and even syntax checkers.</p><p name="1322" id="1322" class="graf graf--p graf-after--p">What I don’t see anywhere though is the consensus and validation code? Right now this looks like a standalone client that simply stores the jobs and can execute them. I don’t see any p2p replication, I don’t see any transaction systems, and I don’t see their own consensus. And I hate to say it, but that’s the difficult part, they have done the easy part. Which means they are very far away from reaching their whitepaper goals.</p><p name="2277" id="2277" class="graf graf--p graf-after--p graf--trailing"><strong class="markup--strong markup--p-strong">Conclusion</strong>: It’s really good code, missing some production experience, they seem far from achieving their whitepaper goals, for now they are a standalone application that can listen to Ethereum only events and do basic HTTP requests.</p></div></div></section>
</section>
<footer><p class="p-tags">Tagged in <a href="https://medium.com/tag/blockchain" class="p-tag">Blockchain</a>, <a href="https://medium.com/tag/crypto" class="p-tag">Crypto</a>, <a href="https://medium.com/tag/cryptocurrency" class="p-tag">Cryptocurrency</a>, <a href="https://medium.com/tag/chain-link" class="p-tag">Chainlink</a></p><p>By <a href="https://medium.com/@suchi.blackwing" class="p-author h-card">Andre Cronje</a> on <a href="https://medium.com/p/10b46f7b231"><time class="dt-published" datetime="2018-03-25T18:05:31.779Z">March 25, 2018</time></a>.</p><p><a href="https://medium.com/@suchi.blackwing/cryptocurrency-code-review-chainlink-10b46f7b231" class="p-canonical">Canonical link</a></p><p>Exported from <a href="https://medium.com">Medium</a> on May 2, 2018.</p></footer></article>

</body></html>