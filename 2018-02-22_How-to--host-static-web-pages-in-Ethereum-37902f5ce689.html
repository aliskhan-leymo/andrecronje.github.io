<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>How to: host static web pages in Ethereum</title><meta name="description" content="So one thing I always wanted to do, was to host a website, in the blockchain. Not host a website on a normal provider and have it talk to a…"><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">How to: host static web pages in Ethereum</h1>
</header>
<section data-field="subtitle" class="p-summary">
So one thing I always wanted to do, was to host a website, in the blockchain. Not host a website on a normal provider and have it talk to a…
</section>
<section data-field="body" class="e-content">
<section name="3ab5" class="section section--body section--first section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="2bbe" id="2bbe" class="graf graf--h3 graf--leading graf--title">How to: host static web pages in Ethereum</h3><p name="5048" id="5048" class="graf graf--p graf-after--h3">So one thing I always wanted to do, was to host a website, in the blockchain. Not host a website on a normal provider and have it talk to a blockchain, but actually have the website be hosted in the blockchain. At this point, I don’t see much purpose behind this approach, blockchains aren’t exactly DNS compatible right now, Ethereum does have their name service (ENS), but even then, it’s not like I can just type in the ENS name into Chrome and then have the website appear… yet.</p><p name="f5b6" id="f5b6" class="graf graf--p graf-after--p">So, let’s host a static web page in a blockchain. My blockchain of choice will be Ethereum. From here, we will go through all of the steps to accomplish being able to create, publish, and view our created website within the Ethereum blockchain. Now this is different than using a decentralized file hosting service, there are already great options for that, IPFS, or even the upcoming Swarm implementation from Ethereum will both be great for file hosting, this will end up being the approach taken to actually host web pages, what this document is proposing is a very simplistic layout for how to have smart contracts have their own little websites. Later in this research we will also look at a metatag standard and perhaps even a search engine. But to begin let’s just look at hosting a website in a smart contract.</p><p name="946d" id="946d" class="graf graf--p graf-after--p">So given that the website is going to be hosted in a smart contract, we have a few constraints, everything has to be inline or alternatively hosted in a normal CDN. So option 1 is to have things like our javascript, css, and images hosted on a CDN and then just host the HTML in the smart contract. I feel like this is cheating, so instead we are going to do everything inline.</p><p name="0d79" id="0d79" class="graf graf--p graf-after--p">So step 1, let’s make our little inline website. As with anything, we will just do a quick Hello World.</p><pre name="c919" id="c919" class="graf graf--pre graf-after--p">&lt;!DOCTYPE html&gt;<br>&lt;html lang=&quot;en&quot;&gt;<br>  &lt;head&gt;<br>    &lt;title&gt;Ethereum Website&lt;/title&gt;<br>  &lt;/head&gt;</pre><pre name="074e" id="074e" class="graf graf--pre graf-after--pre">&lt;body&gt;<br>   &lt;h2&gt;Hello World, I&#39;m hosted in a smart contract&lt;/h2&gt;<br>  &lt;/body&gt;<br>&lt;/html&gt;</pre><p name="7662" id="7662" class="graf graf--p graf-after--pre">That should be enough for now. Next, we need to get this wrapped in a smart contract. So let’s build our Ethereum solidity contract. This first iteration has a few obvious flaws that will will tackle one by one later in this article.</p><pre name="6255" id="6255" class="graf graf--pre graf-after--p">pragma solidity ^0.4.11;<br>contract helloWorldWeb {<br> function renderWeb() public pure returns (string) {<br>   return &#39;&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;&lt;head&gt;&lt;title&gt;Ethereum Website&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;h2&gt;Hello World, I\&#39;m hosted in a smart contract&lt;/h2&gt;&lt;/body&gt;&lt;/html&gt;&#39;;<br> }<br>}</pre><p name="479f" id="479f" class="graf graf--p graf-after--pre">Now we have to get this into Ethereum. For purposes of this article we will just use one of the testnets, at this point we have no reason to deploy to the main net since we aren’t actually doing anything transactional and we don’t need ENS just yet.</p><p name="e418" id="e418" class="graf graf--p graf-after--p">For this, we can just use remix, copy over your solidity code, past it, and deploy to Ropsten.</p><pre name="170f" id="170f" class="graf graf--pre graf-after--p">creation of helloWorldWeb pending...</pre><pre name="1f7d" id="1f7d" class="graf graf--pre graf-after--pre"><strong class="markup--strong markup--pre-strong">[block:2701231 txIndex:9]</strong> from:0x1e3...275c7, to:helloWorldWeb.(constructor), value:0 wei, 0 logs, data:0x606...60029, hash:0x778...002d4</pre><p name="0bd7" id="0bd7" class="graf graf--p graf-after--pre">From the transaction ID we grab our smart contract address, this is our URL for the time being. So let’s quickly check that everything worked out fine. We will use web3.js</p><p name="6858" id="6858" class="graf graf--p graf-after--p">*Below where it says /* ENTER YOU PROVIDER HERE */ you can either connect to a local node you are running, connect to a node you know about, or if you just want to use a third party Ethereum Service Provider (ESP), then head over to infura, sign up for free, and get a provider link.*</p><pre name="eedf" id="eedf" class="graf graf--pre graf-after--p">const Web3 = require(&#39;web3&#39;);<br>const web3 = new Web3(new Web3.providers.HttpProvider(/* ENTER YOUR PROVIDER HERE */));</pre><pre name="8590" id="8590" class="graf graf--pre graf-after--pre">const abi = [{&quot;constant&quot;:true,&quot;inputs&quot;:[],&quot;name&quot;:&quot;renderWeb&quot;,&quot;outputs&quot;:[{&quot;name&quot;:&quot;&quot;,&quot;type&quot;:&quot;string&quot;}],&quot;payable&quot;:false,&quot;stateMutability&quot;:&quot;pure&quot;,&quot;type&quot;:&quot;function&quot;}];</pre><pre name="1bb8" id="1bb8" class="graf graf--pre graf-after--pre">const contract = new web3.eth.Contract(abi, &#39;0x32636e8Ef088f8F09e3eEEef87362AEe54Ed46cA&#39;);</pre><pre name="d470" id="d470" class="graf graf--pre graf-after--pre">contract.methods.renderWeb().call({from: &#39;0x32636e8Ef088f8F09e3eEEef87362AEe54Ed46cA&#39;}, function(error, result){<br>    console.log(&#39;0x4:&#39;+result)<br>});</pre><p name="21d4" id="21d4" class="graf graf--p graf-after--pre">And we get</p><pre name="6dba" id="6dba" class="graf graf--pre graf-after--p">0x4:&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;&lt;head&gt;&lt;title&gt;Ethereum Website&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;h2&gt;Hello World, I&#39;m hosted in a smart contract&lt;/h2&gt;&lt;/body&gt;&lt;/html&gt;</pre><p name="39bf" id="39bf" class="graf graf--p graf-after--pre">Great, there is our HTML.</p><p name="e33b" id="e33b" class="graf graf--p graf-after--p">Now we need to render it, here we have a few options. Hosted solution (defeats the purpose of all of this), local solution (kind of nice but high barrier to entry), chrome extension (lot’s of constraints, but pretty cool)</p><p name="8f65" id="8f65" class="graf graf--p graf-after--p">So let’s look at the local option first.</p><pre name="aa03" id="aa03" class="graf graf--pre graf-after--p">&lt;!DOCTYPE html&gt;<br>&lt;html lang=&quot;en&quot;&gt;<br>  &lt;head&gt;<br>    &lt;title&gt;Ethereum Web Explorer&lt;/title&gt;<br> &lt;script src=&quot;/* LINK TO web3.min.js */&quot;&gt;&lt;/script&gt;<br>  &lt;script&gt;<br>    document.addEventListener(&#39;DOMContentLoaded&#39;, () =&gt; {<br>      web3 = new Web3(new Web3.providers.HttpProvider(/* YOUR ESP HERE */));<br>      document.getElementById(&quot;myButton&quot;).addEventListener(&quot;click&quot;, printAccountBalance);<br>      function printAccountBalance() {<br>        const abi = [{&quot;constant&quot;:true,&quot;inputs&quot;:[],&quot;name&quot;:&quot;renderWeb&quot;,&quot;outputs&quot;:[{&quot;name&quot;:&quot;&quot;,&quot;type&quot;:&quot;string&quot;}],&quot;payable&quot;:false,&quot;stateMutability&quot;:&quot;pure&quot;,&quot;type&quot;:&quot;function&quot;}];</pre><pre name="112b" id="112b" class="graf graf--pre graf-after--pre">const contract = web3.eth.contract(abi).at(/* YOUR CONTRACT HERE */);</pre><pre name="6bf3" id="6bf3" class="graf graf--pre graf-after--pre">const html = contract.renderWeb()<br>        document.getElementById(&quot;display&quot;).innerHTML = html<br>      }<br>    });<br>  &lt;/script&gt;<br>  &lt;/head&gt;</pre><pre name="7115" id="7115" class="graf graf--pre graf-after--pre">&lt;body style=&quot;width:500px;height:500px;&quot;&gt;<br>   &lt;h2&gt;Ethereum Web Explorer&lt;/h2&gt;<br>    &lt;div id=&quot;display&quot;&gt;Dummy Text&lt;/div&gt;<br>    &lt;button id=&quot;myButton&quot;&gt;Load Page&lt;/button&gt;<br>  &lt;/body&gt;<br>&lt;/html&gt;</pre><p name="c4c7" id="c4c7" class="graf graf--p graf-after--pre">Pretty straight forward, we load up web3.min.js from Ethereum. We attach a listener to myButton to load the page we want, web3 grabs the contract and calls renderWeb and we display; here is the result;</p><figure name="42d2" id="42d2" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 504px; max-height: 209px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 41.5%;"></div><img class="graf-image" data-image-id="1*dZ60tshu5PRdCpSQa7j43g.png" data-width="504" data-height="209" src="https://cdn-images-1.medium.com/max/800/1*dZ60tshu5PRdCpSQa7j43g.png"></div></figure><p name="e81e" id="e81e" class="graf graf--p graf-after--figure">So now, technically, we already have a completely decentralized and free website hosted for us on Ethereum.</p><p name="211e" id="211e" class="graf graf--p graf-after--p">From here let’s expand to turn this into more of a browser experience; So first off, we want to be able to explore any contract, and actually browse the different ones. So let’s add the “URL” (smart contract address) as a parameter;</p><pre name="036b" id="036b" class="graf graf--pre graf-after--p">&lt;!DOCTYPE html&gt;<br>&lt;html lang=&quot;en&quot;&gt;<br>  &lt;head&gt;<br>    &lt;title&gt;Ethereum Web Explorer&lt;/title&gt;<br> &lt;script src=&quot;/* web3.min.js */&quot;&gt;&lt;/script&gt;<br>  &lt;script&gt;<br>    document.addEventListener(&#39;DOMContentLoaded&#39;, () =&gt; {<br>      web3 = new Web3(new Web3.providers.HttpProvider(/ * ESP */));<br>      document.getElementById(&quot;myButton&quot;).addEventListener(&quot;click&quot;, printAccountBalance);<br>      function printAccountBalance() {<br>        var contractAddress = document.getElementById(&quot;url&quot;).value;<br>        const abi = [{&quot;constant&quot;:true,&quot;inputs&quot;:[],&quot;name&quot;:&quot;renderWeb&quot;,&quot;outputs&quot;:[{&quot;name&quot;:&quot;&quot;,&quot;type&quot;:&quot;string&quot;}],&quot;payable&quot;:false,&quot;stateMutability&quot;:&quot;pure&quot;,&quot;type&quot;:&quot;function&quot;}];</pre><pre name="b3b2" id="b3b2" class="graf graf--pre graf-after--pre">        const contract = web3.eth.contract(abi).at(contractAddress);<br>        const html = contract.renderWeb()<br>        document.getElementById(&quot;display&quot;).innerHTML = html<br>      }<br>    });<br>  &lt;/script&gt;<br>  &lt;/head&gt;</pre><pre name="fd83" id="fd83" class="graf graf--pre graf-after--pre">&lt;body style=&quot;width:500px;height:500px;&quot;&gt;<br>   &lt;h2&gt;Ethereum Web Explorer&lt;/h2&gt;<br>    &lt;input id=&quot;url&quot; type=text size=50 name=url&gt;<br>    &lt;div id=&quot;display&quot;&gt;Dummy Text&lt;/div&gt;<br>    &lt;button id=&quot;myButton&quot;&gt;Load Page&lt;/button&gt;<br>  &lt;/body&gt;<br>&lt;/html&gt;</pre><p name="6fcd" id="6fcd" class="graf graf--p graf-after--pre">Easy enough, so now we already have the browser approach, we set the “URL”, and we can view the contract. So let’s create another contract and test it.</p><p name="9df3" id="9df3" class="graf graf--p graf-after--p">Again, contract.sol -&gt; remix -&gt; ropsten -&gt; deploy. Now let’s view contract #1</p><figure name="9324" id="9324" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 488px; max-height: 202px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 41.4%;"></div><img class="graf-image" data-image-id="1*YliUJUga0NfVxlCFvg0jgQ.png" data-width="488" data-height="202" src="https://cdn-images-1.medium.com/max/800/1*YliUJUga0NfVxlCFvg0jgQ.png"></div></figure><p name="dced" id="dced" class="graf graf--p graf-after--figure">And now let’s view contract #2;</p><figure name="7a00" id="7a00" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 531px; max-height: 195px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 36.7%;"></div><img class="graf-image" data-image-id="1*NyvYpYY2kwmjmgNr2uYU2Q.png" data-width="531" data-height="195" src="https://cdn-images-1.medium.com/max/800/1*NyvYpYY2kwmjmgNr2uYU2Q.png"></div></figure><p name="829d" id="829d" class="graf graf--p graf-after--figure">So now, essentially we have a web explorer! This is easy to keep as a local file, deploy online on a simple portal, or build into a chrome extension.</p><p name="1a49" id="1a49" class="graf graf--p graf-after--p">But now let’s look at our solidity contract. I’ts immutable. And that’s a bit of an issue. So what happens when we want to update our HTML? Do we really want to deploy a new smart contract every single time? Definitely not. So let’s see about modifying it, so that it instead allows us to update our HTML.</p><p name="1406" id="1406" class="graf graf--p graf-after--p">At it’s most basic we simply want to change that the HTML returned is saved in the state, and that we can update the state whenever we want. Again very straight forward;</p><pre name="22ae" id="22ae" class="graf graf--pre graf-after--p">pragma solidity ^0.4.11;</pre><pre name="e407" id="e407" class="graf graf--pre graf-after--pre">contract helloWorldWeb {<br> address public owner;<br> string html;<br> <br> modifier onlyOwner() {<br>  require(msg.sender == owner);<br>  _;<br> }<br> <br> function helloWorldWeb() public {<br>  owner = msg.sender;<br> }<br> <br> function setHTML(string _html) payable public onlyOwner {<br>  html = _html;<br> }<br> <br> function renderWeb() public view returns (string) {<br>   return html;<br> }<br>}</pre><p name="1034" id="1034" class="graf graf--p graf-after--pre">Now if we look at our new contract;</p><figure name="81e2" id="81e2" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 467px; max-height: 233px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 49.9%;"></div><img class="graf-image" data-image-id="1*bakzDtcuNH2l_gwBAOcvJA.png" data-width="467" data-height="233" data-is-featured="true" src="https://cdn-images-1.medium.com/max/800/1*bakzDtcuNH2l_gwBAOcvJA.png"></div></figure><p name="468d" id="468d" class="graf graf--p graf-after--figure">The next step is having contracts create their own meta tags as well, this will allow contracts to be indexed based on their tags and purpose, if we can accomplish this, we can have a fully decentralized smart contract search engine for smart contract websites.</p><p name="4320" id="4320" class="graf graf--p graf-after--p graf--trailing">More details to follow in my next articles.</p></div></div></section>
</section>
<footer><p class="p-tags">Tagged in <a href="https://medium.com/tag/javascript" class="p-tag">JavaScript</a>, <a href="https://medium.com/tag/ethereum" class="p-tag">Ethereum</a>, <a href="https://medium.com/tag/hosting" class="p-tag">Hosting</a>, <a href="https://medium.com/tag/blockchain" class="p-tag">Blockchain</a></p><p>By <a href="https://medium.com/@suchi.blackwing" class="p-author h-card">Andre Cronje</a> on <a href="https://medium.com/p/37902f5ce689"><time class="dt-published" datetime="2018-02-22T07:33:15.671Z">February 22, 2018</time></a>.</p><p><a href="https://medium.com/@suchi.blackwing/how-to-host-static-web-pages-in-ethereum-37902f5ce689" class="p-canonical">Canonical link</a></p><p>Exported from <a href="https://medium.com">Medium</a> on May 2, 2018.</p></footer></article>

</body></html>